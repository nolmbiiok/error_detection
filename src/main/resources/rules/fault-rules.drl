package rules

import com.mentoring.entity.FaultEventEntity

// HLS_TIMEOUT 3회 이상이면 HIGH로 격상
rule "HLS_TIMEOUT 지속 장애"
    when
        $event : FaultEventEntity(
            faultType == "HLS_TIMEOUT",
            hlsTimeoutCount >= 3
        )
    then
        $event.setSeverity(FaultEventEntity.Severity.HIGH);
        $event.setReason("HLS_TIMEOUT 지속 장애 상태");
        System.out.println("⚠ 룰 실행됨 - HLS_TIMEOUT 지속 장애 감지");
end

rule "HLS_TIMEOUT 경고 단계"
    when
        $event : FaultEventEntity(
            faultType == "HLS_TIMEOUT",
            hlsTimeoutCount < 3
        )
    then
        $event.setSeverity(FaultEventEntity.Severity.LOW);
        $event.setReason("HLS_TIMEOUT 경고 상태");
        System.out.println("⚠ 룰 실행됨 - HLS_TIMEOUT 경고 상태");
end

